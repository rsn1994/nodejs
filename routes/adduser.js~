var addContl = require('../controllers/addusercontroller.js'); // include our new controller
var Joi = require('joi');
exports.register = function(server,options,next)

{

   var addContlObj = new addContl(); // create an object for the new controller.

   server.route([{

           method: 'POST',

           path:   '/adduser',

           config: {

                  tags : ['api'], // let it be here for now. I will explain it later in this blog

               // We use Joi plugin to validate request

               validate: {

                   payload: {

                       // Both name and id are required fields
sid: Joi.number().integer().min(4).max(10).required().description('the id for the student'),
        fname: Joi.string().min(6).max(200).required().description('the First name for the student'),
        lname: Joi.string().min(2).max(200).required().description('the Last name for the student'),
        address: Joi.string().min(6).max(200).required().description('Address of the student'),
	 city: Joi.string().min(6).max(200).required().description('City of the student'),
	 dob: Joi.date().required().description('Date of birth the student'),
	 sex: Joi.string().min(1).max(1).required().description('the sex of the student'),
	 course: Joi.string().min(3).max(200).required().description('the Course of the student')

                   }

               }

           },

           handler:  addContlObj. addUsers//  see here we removed a lot of codes and simply handed

                                                                     //over that to our new controller function addUsers

   }]);

   next();

};

exports.register.attributes = {

   name    :'adduser-route',

   version : '0.0.1'

};
